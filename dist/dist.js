!function(t){var e={};function r(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(s,i,function(e){return t[e]}.bind(null,i));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var i=class{constructor(){}view(){return s.markup("div",{attrs:{style:"width:100%;height:60px;background-color:rgba(0,0,0,0.6);",id:"divNavbar"},children:[s.markup("h3",{attrs:{class:"navbar"},children:[s.textNode("Minesweeper")]})]})}};const a=40,n=20,o=300,c=900,l=10;var h=class{constructor(){this.mineMap=[],this.minesVisible=!1,this.victory=!1}slOnInit(){this.createMineMap()}createMineMap(){let t,e,r,s;for(t=0;t<n;++t)for(this.mineMap[t]=new Array(n),e=0;e<n;++e)this.mineMap[t][e]={mine:0,value:"",clicked:!1,row:t,col:e};for(t=0;t<a;++t)r=Math.floor(Math.random()*n),s=Math.floor(Math.random()*n),1===this.mineMap[r][s].mine?t--:this.mineMap[r][s].mine=1}revealMines(){this.minesVisible=!0}clickCell(t,e){if(!0!==this.victory&&!0!==this.minesVisible&&!0!==e.clicked)if(1===e.mine){this.revealMines();let t=s.getState();t.setState("Game over!"),s.setState(t)}else{e.clicked=!0;let t=s.getState();t.addScore(10),s.setState(t);let r=0;const i=e.row,a=e.col;let h,u;for(h=Math.max(i-1,0);h<=Math.min(i+1,n-1);h++)for(u=Math.max(a-1,0);u<=Math.min(a+1,n-1);u++)1===this.mineMap[h][u].mine&&r++;e.value=r;let d=[],m=[],p=0;if(0===r){for(h=Math.max(i-1,0);h<=Math.min(i+1,n-1);h++)for(u=Math.max(a-1,0);u<=Math.min(a+1,n-1);u++)""===this.mineMap[h][u].value&&(m.push(this.mineMap[h][u]),++p===l&&(p=0,d.push(m),m=[]));d.push(m);let t=0;d.forEach(e=>{s.detachedSetTimeout(function(){e.forEach(t=>{this.clickCell(this,t)}),s.detectChanges()}.bind(this),t),(t+=o)>c&&(t=c)})}this.checkLevelCompletion()}}checkLevelCompletion(){let t=!0;t:for(let e=0;e<n;e++)for(let r=0;r<n;r++)if(!1===this.mineMap[e][r].clicked&&1!==this.mineMap[e][r].mine){t=!1;break t}if(!0===t&&!1===this.victory){this.victory=!0;let t=s.getState();t.setState("You win!"),s.setState(t),this.revealMines()}}reset(){this.minesVisible=!1,this.victory=!1,this.createMineMap();let t=s.getState();t.resetState(),t.setScore(0),s.setState(t)}view(){return s.markup("div",{attrs:{id:"gameBoard",class:"content"},children:[s.markup("table",{attrs:{class:"table-minesweeper"},children:[...Array.from(this.mineMap,t=>s.markup("tr",{attrs:{},children:[...Array.from(t,t=>s.markup("td",{attrs:{...!0===t.clicked&&{class:"clicked"},...!0===this.minesVisible&&1===t.mine&&{class:"mine"},onclick:this.clickCell.bind(this,this,t)},children:[s.textNode(t.value)]}))]}))]}),s.markup("div",{attrs:{},children:[s.markup("button",{attrs:{onclick:this.reset.bind(this),class:"pure-button",style:"background-color:red;color:white;"},children:[s.textNode("New board")]})]})]})}};var u=class{constructor(){}view(){return s.markup("div",{attrs:{id:"divScoreboard",class:"scoreboard"},children:[s.markup("span",{attrs:{},children:[s.textNode("Score: "+s.getState().getScore()),...!0===s.getState().hasState()?[s.textNode(" "+s.getState().getState())]:[]]})]})}};let d=new class{constructor(){this.score=0,this.state=""}getScore(){return this.score}setScore(t){this.score=t}addScore(t){this.score+=t}getState(){return this.state}setState(t){this.state=t}hasState(){return""!==this.state}resetState(){this.state=""}};s.setState(d);let m=new i;s.mount("divNavbar",m);let p=new u;s.mount("divScoreboard",p);let f=new h;s.mount("gameBoard",f)}]);