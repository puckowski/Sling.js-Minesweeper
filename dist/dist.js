!function(t){var e={};function r(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var i=class{constructor(){}view(){return s.markup("div",{attrs:{style:"width:100%;height:60px;background-color:rgba(0,0,0,0.6);"},children:[s.markup("h3",{attrs:{class:"navbar"},children:[s.textNode("Minesweeper")]})]})}};const a=40,n=20,o=200,l=4,c=50;var u=class{constructor(){this.mineMap=[],this.minesVisible=!1,this.victory=!1}slOnInit(){this.createMineMap()}createMineMap(){let t,e,r,i;for(t=0;t<n;++t)for(this.mineMap[t]=new Array(n),e=0;e<n;++e)this.mineMap[t][e]={mine:0,value:null,clicked:!1,row:t,col:e};for(t=0;t<a;++t)r=Math.floor(Math.random()*n),i=Math.floor(Math.random()*n),1===this.mineMap[r][i].mine?t--:this.mineMap[r][i].mine=1}revealMines(){this.minesVisible=!0}clickCell(t,e,r,i=c,a=0){if(!0!==this.victory&&!0!==this.minesVisible)if(1===e.mine){this.revealMines();let t=s.getState();t.setState("Game over!"),s.setState(t)}else{e.clicked=!0;let t=s.getState();t.addScore(10),s.setState(t);let r=0;const u=e.row,h=e.col;let d,m;for(d=Math.max(u-1,0);d<=Math.min(u+1,n-1);d++)for(m=Math.max(h-1,0);m<=Math.min(h+1,n-1);m++)1===this.mineMap[d][m].mine&&r++;if(e.value=r,0===r)for(d=Math.max(u-1,0);d<=Math.min(u+1,n-1);d++)for(m=Math.max(h-1,0);m<=Math.min(h+1,n-1);m++)null===this.mineMap[d][m].value&&(a<l?(a++,setTimeout(function(t,e){this.clickCell(this,this.mineMap[t][e],null,i,a)}.bind(this,d,m),i),i<o&&(i+=c)):this.clickCell(this,this.mineMap[d][m],null));this.checkLevelCompletion()}}checkLevelCompletion(){let t=!0;t:for(let e=0;e<n;e++)for(let r=0;r<n;r++)if(!1===this.mineMap[e][r].clicked&&1!==this.mineMap[e][r].mine){t=!1;break t}if(!0===t&&!1===this.victory){this.victory=!0;let t=s.getState();t.setState("You win!"),s.setState(t),this.revealMines()}}reset(){this.minesVisible=!1,this.victory=!1,this.createMineMap();let t=s.getState();t.resetState(),t.setScore(0),s.setState(t)}view(){return s.markup("div",{attrs:{id:"gameBoard",class:"content"},children:[s.markup("table",{attrs:{class:"table-minesweeper"},children:[...Array.from(this.mineMap,t=>s.markup("tr",{attrs:{},children:[...Array.from(t,t=>s.markup("td",{attrs:{...!0===t.clicked&&{class:"clicked"},...!0===this.minesVisible&&1===t.mine&&{class:"mine"},onclick:this.clickCell.bind(this,this,t)},children:[...null!==t.value?[s.textNode(t.value)]:[]]}))]}))]}),s.markup("div",{attrs:{},children:[s.markup("button",{attrs:{onclick:this.reset.bind(this),class:"pure-button",style:"background-color:red;color:white;"},children:[s.textNode("New board")]})]})]})}};var h=class{constructor(){}view(){return s.markup("div",{attrs:{id:"divScoreboard",class:"scoreboard"},children:[s.markup("span",{attrs:{},children:[s.textNode("Score: "+s.getState().getScore()),...!0===s.getState().hasState()?[s.textNode(" "+s.getState().getState())]:[]]})]})}};let d=new class{constructor(){this.score=0,this.state=""}getScore(){return this.score}setScore(t){this.score=t}addScore(t){this.score+=t}getState(){return this.state}setState(t){this.state=t}hasState(){return""!==this.state}resetState(){this.state=""}};s.setState(d);let m=new i;s.mount("divNavbar",m);let p=new h;s.mount("divScoreboard",p);let f=new u;s.mount("gameBoard",f),s.autoUpdate("divScoreboard",p),s.autoUpdate("gameBoard",f)}]);